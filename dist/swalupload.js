!function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n){!function(e){function n(){var n={};return e.ajax({type:"GET",url:v,async:!1,dataType:"json",success:function(e){n=e}}),n}function t(e){h=1==e?"random_name":"local_name"}function r(){if(y=timestamp=Date.parse(new Date)/1e3,x<y+3){var e=n();return f=e.host,c=e.policy,p=e.accessid,m=e.signature,x=parseInt(e.expire),d=e.callback,_=e.dir,!0}return!1}function a(e){e=e||32;var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=n.length,r="";for(i=0;i<e;i++)r+=n.charAt(Math.floor(Math.random()*t));return r}function o(e){return pos=e.lastIndexOf("."),suffix="",-1!=pos&&(suffix=e.substring(pos)),suffix}function s(e){return"local_name"==h?g+="${filename}":"random_name"==h&&(suffix=o(e),g=_+a(10)+suffix),""}function l(e){return"local_name"==h?(tmp_name=g,tmp_name=tmp_name.replace("${filename}",e),tmp_name):"random_name"==h?g:void 0}function u(e,n,t){0==t&&(t=r()),g=_,""!=n&&(suffix=o(n),s(n)),new_multipart_params={key:g,policy:c,OSSAccessKeyId:p,success_action_status:"200",callback:d,signature:m},e.setOption({url:f,multipart_params:new_multipart_params}),e.start()}var p="",f="",c="",m="",d="",_="",x=0,g="",h="",v="../../php/get.php",y=timestamp=Date.parse(new Date)/1e3;e.fn.alioss=function(n){var r={flash:"lib/plupload-2.1.2/js/Moxie.swf",silverlight:"lib/plupload-2.1.2/js/Moxie.xap",serverSignUrl:"",rename:!0,maxfilesize:"10mb",postButton:null,multi:!1,FilesAdded:function(e){},UploadProgress:function(e){},FileUploaded:function(e,n){},Error:function(e){alert(e)}},i=this,a=jQuery.extend(r,n);""!=a.serverSignUrl&&(v=a.serverSignUrl);var o={mime_types:[{title:"Image files",extensions:"jpg,gif,png,bmp"},{title:"Zip files",extensions:"zip,rar"}],max_file_size:a.maxfilesize,prevent_duplicates:!0};navigator.userAgent.indexOf("Chrome")>-1?o.mime_types=[]:o.mime_types=[{title:"Image files",extensions:"jpg,gif,png,bmp"},{title:"Zip files",extensions:"zip,rar"}],e(this).each(function(n,r){var s=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",multi_selection:a.multi,browse_button:e(r)[0],container:e(i).parent()[0],url:"http://oss.aliyuncs.com",flash_swf_url:a.flash,silverlight_xap_url:a.silverlight,filters:o,init:{PostInit:function(){null!=a.postButton?e(a.postButton).click(function(){return u(s,"",!1),!1}):u(s,"",!1)},FilesAdded:function(e,n){plupload.each(n,function(e){e.ratio=plupload.formatSize(e.size),a.FilesAdded(e)}),null==a.postButton&&u(s,"",!1)},BeforeUpload:function(e,n){t(a.rename),u(e,n.name,!0)},UploadProgress:function(e,n){a.UploadProgress(n)},FileUploaded:function(e,n,t){n.name=l(n.name),a.FileUploaded(n,t)},Error:function(e,n){-600==n.code?a.Error("选择的文件超过了"+a.maxfilesize):-601==n.code?a.Error("不能上传该类型的文件"):-602==n.code?a.Error("该文件已经上传过了"):a.Error(n.response)}}});s.init()})}}(jQuery)}]);